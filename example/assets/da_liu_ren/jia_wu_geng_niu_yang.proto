syntax = "proto3";

package xuan_daliuren;

// 主要的玄大六壬数据结构
message XuanDaLiuRenData {
  string day_jia_zi = 1;                    // 日甲子
  string shi_chen = 2;                      // 时辰
  string ju_number_name = 3;                // 局数名称
  int32 ju_number = 4;                      // 局数（从局数名称中提取的数字）
  FourClass four_class = 5;                 // 四课
  ThreeChuan three_chuan = 6;               // 三传
  map<string, GongInfo> gong_mapper = 7;    // 宫位映射
}

// 四课结构
message FourClass {
  bool is_full_class = 1;                   // 是否满课
  bool is_three_class_only = 2;             // 是否仅三课
  bool is_fu_yin = 3;                       // 是否伏吟
  bool is_fan_yin = 4;                      // 是否反吟
  ClassInfo first = 5;                      // 第一课
  ClassInfo second = 6;                     // 第二课
  ClassInfo third = 7;                      // 第三课
  ClassInfo fourth = 8;                     // 第四课
  repeated int32 same_sky_ground_class_list = 9; // 相同天地盘课列表
}

// 课信息
message ClassInfo {
  int32 order = 1;                          // 顺序
  string sky = 2;                           // 天盘
  string ground = 3;                        // 地盘
  bool is_first_class = 4;                  // 是否第一课
  string gui_ren = 5;                       // 贵人
  optional int32 she_hai_times = 6;         // 涉害次数
  repeated int32 other_same_sky_ground_index_list = 7; // 其他相同天地盘索引列表
  optional string zei_ke_type = 8;          // 贼克类型
  optional bool is_sky_ke_day_gan = 9;      // 天盘是否克日干
  bool is_sky_same_yin_yang_with_day_gan = 10; // 天盘是否与日干同阴阳
  optional string tian_gan = 11;            // 天干
}

// 三传结构
message ThreeChuan {
  string nine_zong_men = 1;                 // 九宗门
  ChuanInfo first = 2;                      // 初传
  ChuanInfo second = 3;                     // 中传
  ChuanInfo third = 4;                      // 末传
  optional string type = 5;                 // 类型
  optional string zei_ke_type = 6;          // 贼克类型
}

// 传信息（已移除tianGan字段）
message ChuanInfo {
  int32 order = 1;                          // 顺序
  string di_zhi = 2;                        // 地支
  string gui_ren = 3;                       // 贵人
  string liu_qin = 4;                       // 六亲
}

// 宫位信息（已移除tianGan和jiaZi字段）
message GongInfo {
  string ground_pan_di_zhi = 1;             // 地盘地支
  string gui_ren = 2;                       // 贵人
  string sky_pan_di_zhi = 3;                // 天盘地支
}

// 玄大六壬数据列表
message XuanDaLiuRenDataList {
  bool isYinYang = 1;
  repeated XuanDaLiuRenData data_list = 2;
}

message XuanDaLiuRenDataListBundle{
  XuanDaLiuRenDataList yangList = 1;
  XuanDaLiuRenDataList yinList = 2;
}
