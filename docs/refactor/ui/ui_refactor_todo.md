# UI重构原子待办清单

说明
- 目标：将现有“页面式盘面”重构为可复用组件，兼容多系统、多分辨率、扩展卡片区与交互。
- 规则：每项为动词开头的原子操作，简短可执行。

## 已完成
- [x] 交付UI重构总体方案
- [x] 确认docs/refactor/ui目录存在
- [x] 保存讨论至beauty_page_report.md

## 核心组件
- [x] 提取Panel为Widget骨架
- [x] 建立PanelController接口
- [x] 定义PanelConfig模型
- [x] 迁移尺寸常量到config
- [x] 统一四环RingLayer
- [x] 封装星体与轨迹层
- [x] 添加径向辅助线层
- [ ] 抽象文本渲染适配器（稍后处理）

## 卡片区
- 注：本区任务已全部取消（后续如需恢复将另立文档）
- [ ] ~~定义InfoCard基类~~（已取消）
- [ ] ~~实现四柱卡片初版~~（已取消）
- [ ] ~~实现实年调整卡片~~（已取消）
- [ ] ~~集成SliverGrid布局卡片~~（已取消）
- [ ] ~~添加粘性分组标题~~（已取消）

## 布局与适配
- [x] 用LayoutBuilder算面板尺寸
- [x] 引入AspectRatio保持比例
- [ ] 设置断点与字体缩放
- [ ] 优化小屏拥挤策略
- [ ] 支持TabBar+PageView系统
- [ ] 建立系统配置映射

## 交互与状态
- [x] 抽象太极选择逻辑
- [ ] 统一星体/神煞提示
- [ ] 引入细粒度状态刷新
- [ ] 保留旧交互数据桥接

## 性能优化
- [x] 分层RepaintBoundary
- [x] 控制shouldRepaint逻辑
- [ ] 缓存固定文本环
- [ ] 预生成路径缓存池

## 预览与测试
- [x] 创建Panel预览页面
- [ ] 添加布局断言测试
- [ ] 提供RingLayer演示
- [ ] 建立快照回归比对

## 文档与验收
- [ ] 更新报告迁移进度
- [ ] 细化未完项与状态
- [ ] 定义组件验收标准
- [ ] 编写使用扩展指南